# golang-api

A simple API to learn [go](https://go.dev/) and tools.

### Tools:

- [gRPC](https://grpc.io/): A high performance, open source universal RPC framework.
- [proto](https://protobuf.dev/): Language-neutral, platform-neutral extensible mechanisms for serializing structured data.
- [sqlc](https://sqlc.dev/): Generates fully type-safe idiomatic Go code from SQL.
- [atlas](https://atlasgo.io/): Language-independent tool for managing and migrating database schemas.

## Project structure

`db/schema.hcl`: Atlas schema file. Used to generate migration files.

`db/migrations/`: Atlas migration files output directory. Sqlc generates models from these files.

`db/*.sql`: Sql code that is compiled by sqlc.

`sqlc.yaml`: Sqlc configuration file.

`proto/`: Proto configuration files and code.

`gen/`: Go code generated by sqlc and proto.

`server/`: API services implementation.

## Makefile rules

`docker`: Starts all containers from `docker-compose.yaml`.

`dclean`: Stops and cleans all containers, networks and volumes.

`migrations`: Use atlas to generate migration files.

`migrate`: Push migrations to the database.

`sqlc`: Generates go code in `gen/` from sql `db/*.sql` files.

`proto`: Generates go code in `gen/` from proto code in `proto/`.

`run`: Run the API

`all`: Calls `sqlc`, `proto` and `run`.
